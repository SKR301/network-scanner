<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Home</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
    <h1 class="text-center">NETWORK-SCANNER</h1>

    
    <div id="scanTable" class="container mt-5">
        <div class="row">
            <p class="col">id</p>
            <a href="#" class="col">ip_start</a>
            <a href="#" class="col">ip_end</a>
            <p class="col">enabled</p>
            <p class="col">finished</p>
        </div>
    </div>
    
    <div id="portTable" class="container mt-5">
        <div class="row">
            <p class="col">id</p>
            <p class="col">port</p>
            <p class="col">enabled</p>
            <p class="col">port_description</p>
        </div>
    </div>

</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
    // $.get("./results", function(data, status){
    //     console.log("Data: " + JSON.stringify(data) + "\nStatus: " + status);
    // });
    
    $.get("./scans", function(data, status){
        if(status == 'success'){
            for(a=0;a<data.length;a++){
                var id = document.createElement('p');
                    id.className = 'col';
                    id.innerHTML = data[a].id;
                var ip_start = document.createElement('a');
                    ip_start.className = 'col';
                    ip_start.innerHTML = data[a].ip_start;
                    ip_start.setAttribute('href', "http://"+data[a].ip_start);
                var ip_end = document.createElement('a');
                    ip_end.className = 'col';
                    ip_end.innerHTML = data[a].ip_end;
                    ip_end.setAttribute('href', "http://"+data[a].ip_end);
                var enabled = document.createElement('p');
                    enabled.className = 'col';
                    enabled.innerHTML = data[a].enabled;
                var finished = document.createElement('p');
                    finished.className = 'col';
                    finished.innerHTML = data[a].finished;
                
                var row = document.createElement('div');
                    row.className = 'row';
                    row.append(id);
                    row.append(ip_start);
                    row.append(ip_end);
                    row.append(enabled);
                    row.append(finished);
                
                document.getElementById('scanTable').append(row);
            }
        }
    });
    
    $.get("./ports", function(data, status){
        console.log("Data: " + JSON.stringify(data) + "\nStatus: " + status);
        
        if(status == 'success'){
            for(a=0;a<data.length;a++){
                var id = document.createElement('p');
                    id.className = 'col';
                    id.innerHTML = data[a].id;
                var port = document.createElement('p');
                    port.className = 'col';
                    port.innerHTML = data[a].port;
                var enabled = document.createElement('p');
                    enabled.className = 'col';
                    enabled.innerHTML = data[a].enabled;
                var port_description = document.createElement('p');
                    port_description.className = 'col';
                    port_description.innerHTML = data[a].port_description;
                
                var row = document.createElement('div');
                    row.className = 'row';
                    row.append(id);
                    row.append(port);
                    row.append(enabled);
                    row.append(port_description);
                
                document.getElementById('portTable').append(row);
            }
        }
    });
});
</script>
</html>